<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/pom.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/pom.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&#10;         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;    &lt;groupId&gt;com.example&lt;/groupId&gt;&#10;    &lt;artifactId&gt;taskmanagement&lt;/artifactId&gt;&#10;    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;    &lt;packaging&gt;jar&lt;/packaging&gt;&#10;    &lt;name&gt;Task Management Application&lt;/name&gt;&#10;    &lt;description&gt;Task management backend similar to Jira/Trello&lt;/description&gt;&#10;    &lt;parent&gt;&#10;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;        &lt;version&gt;3.2.0&lt;/version&gt;&#10;        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;    &lt;/parent&gt;&#10;    &lt;properties&gt;&#10;        &lt;java.version&gt;17&lt;/java.version&gt;&#10;        &lt;spring-ai.version&gt;1.0.0-M4&lt;/spring-ai.version&gt;&#10;    &lt;/properties&gt;&#10;    &lt;dependencyManagement&gt;&#10;        &lt;dependencies&gt;&#10;            &lt;dependency&gt;&#10;                &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;&#10;                &lt;artifactId&gt;spring-ai-bom&lt;/artifactId&gt;&#10;                &lt;version&gt;${spring-ai.version}&lt;/version&gt;&#10;                &lt;type&gt;pom&lt;/type&gt;&#10;                &lt;scope&gt;import&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;        &lt;/dependencies&gt;&#10;    &lt;/dependencyManagement&gt;&#10;    &lt;dependencies&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-ai-core&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;com.h2database&lt;/groupId&gt;&#10;            &lt;artifactId&gt;h2&lt;/artifactId&gt;&#10;            &lt;scope&gt;runtime&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;            &lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;            &lt;optional&gt;true&lt;/optional&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;            &lt;scope&gt;test&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;    &lt;/dependencies&gt;&#10;    &lt;repositories&gt;&#10;        &lt;repository&gt;&#10;            &lt;id&gt;spring-milestones&lt;/id&gt;&#10;            &lt;name&gt;Spring Milestones&lt;/name&gt;&#10;            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;&#10;            &lt;snapshots&gt;&#10;                &lt;enabled&gt;false&lt;/enabled&gt;&#10;            &lt;/snapshots&gt;&#10;        &lt;/repository&gt;&#10;        &lt;repository&gt;&#10;            &lt;id&gt;spring-snapshots&lt;/id&gt;&#10;            &lt;name&gt;Spring Snapshots&lt;/name&gt;&#10;            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;&#10;            &lt;releases&gt;&#10;                &lt;enabled&gt;false&lt;/enabled&gt;&#10;            &lt;/releases&gt;&#10;        &lt;/repository&gt;&#10;    &lt;/repositories&gt;&#10;    &lt;build&gt;&#10;        &lt;plugins&gt;&#10;            &lt;plugin&gt;&#10;                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;            &lt;/plugin&gt;&#10;        &lt;/plugins&gt;&#10;    &lt;/build&gt;&#10;&lt;/project&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&#10;         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;    &lt;groupId&gt;com.example&lt;/groupId&gt;&#10;    &lt;artifactId&gt;taskmanagement&lt;/artifactId&gt;&#10;    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;    &lt;packaging&gt;jar&lt;/packaging&gt;&#10;    &lt;name&gt;Task Management Application&lt;/name&gt;&#10;    &lt;description&gt;Task management backend similar to Jira/Trello&lt;/description&gt;&#10;    &lt;parent&gt;&#10;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;        &lt;version&gt;3.2.0&lt;/version&gt;&#10;        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;    &lt;/parent&gt;&#10;    &lt;properties&gt;&#10;        &lt;java.version&gt;17&lt;/java.version&gt;&#10;    &lt;/properties&gt;&#10;    &lt;dependencies&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;com.h2database&lt;/groupId&gt;&#10;            &lt;artifactId&gt;h2&lt;/artifactId&gt;&#10;            &lt;scope&gt;runtime&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;            &lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;            &lt;optional&gt;true&lt;/optional&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;            &lt;scope&gt;test&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;    &lt;/dependencies&gt;&#10;    &lt;build&gt;&#10;        &lt;plugins&gt;&#10;            &lt;plugin&gt;&#10;                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;            &lt;/plugin&gt;&#10;        &lt;/plugins&gt;&#10;    &lt;/build&gt;&#10;&lt;/project&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/com/example/taskmanagement/mcp/McpController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/example/taskmanagement/mcp/McpController.java" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package com.example.taskmanagement.mcp;&#10;&#10;import com.fasterxml.jackson.databind.ObjectMapper;&#10;import lombok.RequiredArgsConstructor;&#10;import lombok.extern.slf4j.Slf4j;&#10;import org.springframework.http.MediaType;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.web.bind.annotation.*;&#10;&#10;import java.util.*;&#10;import java.util.stream.Collectors;&#10;&#10;/**&#10; * MCP HTTP Controller&#10; * Implements the Model Context Protocol over HTTP/SSE&#10; */&#10;@Slf4j&#10;@RestController&#10;@RequestMapping(&quot;/mcp&quot;)&#10;@RequiredArgsConstructor&#10;public class McpController {&#10;&#10;    private final McpServerConfiguration.McpToolRegistry toolRegistry;&#10;    private final ObjectMapper objectMapper;&#10;&#10;    /**&#10;     * Initialize the MCP connection&#10;     */&#10;    @PostMapping(value = &quot;/initialize&quot;, produces = MediaType.APPLICATION_JSON_VALUE)&#10;    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; initialize(@RequestBody Map&lt;String, Object&gt; request) {&#10;        log.info(&quot;MCP Initialize request: {}&quot;, request);&#10;        &#10;        Map&lt;String, Object&gt; response = new HashMap&lt;&gt;();&#10;        response.put(&quot;protocolVersion&quot;, &quot;2024-11-05&quot;);&#10;        response.put(&quot;serverInfo&quot;, Map.of(&#10;                &quot;name&quot;, &quot;task-management&quot;,&#10;                &quot;version&quot;, &quot;1.0.0&quot;&#10;        ));&#10;        response.put(&quot;capabilities&quot;, Map.of(&#10;                &quot;tools&quot;, Map.of(&quot;listChanged&quot;, false),&#10;                &quot;resources&quot;, Map.of(&quot;subscribe&quot;, false, &quot;listChanged&quot;, false),&#10;                &quot;prompts&quot;, Map.of(&quot;listChanged&quot;, false),&#10;                &quot;logging&quot;, Map.of()&#10;        ));&#10;        &#10;        return ResponseEntity.ok(response);&#10;    }&#10;&#10;    /**&#10;     * Handle notifications/initialized&#10;     */&#10;    @PostMapping(value = &quot;/notifications/initialized&quot;, produces = MediaType.APPLICATION_JSON_VALUE)&#10;    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; notificationsInitialized() {&#10;        log.info(&quot;MCP notifications/initialized&quot;);&#10;        return ResponseEntity.ok(Map.of(&quot;success&quot;, true));&#10;    }&#10;&#10;    /**&#10;     * List available tools&#10;     */&#10;    @PostMapping(value = &quot;/tools/list&quot;, produces = MediaType.APPLICATION_JSON_VALUE)&#10;    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; listTools() {&#10;        log.info(&quot;MCP tools/list request&quot;);&#10;        &#10;        List&lt;Map&lt;String, Object&gt;&gt; tools = toolRegistry.getAllTools().values().stream()&#10;                .map(tool -&gt; {&#10;                    Map&lt;String, Object&gt; toolDef = new HashMap&lt;&gt;();&#10;                    toolDef.put(&quot;name&quot;, tool.name());&#10;                    toolDef.put(&quot;description&quot;, tool.description());&#10;                    toolDef.put(&quot;inputSchema&quot;, generateInputSchema(tool.name()));&#10;                    return toolDef;&#10;                })&#10;                .collect(Collectors.toList());&#10;        &#10;        return ResponseEntity.ok(Map.of(&quot;tools&quot;, tools));&#10;    }&#10;&#10;    /**&#10;     * Call a specific tool&#10;     */&#10;    @PostMapping(value = &quot;/tools/call&quot;, produces = MediaType.APPLICATION_JSON_VALUE)&#10;    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; callTool(@RequestBody Map&lt;String, Object&gt; request) {&#10;        String toolName = (String) request.get(&quot;name&quot;);&#10;        @SuppressWarnings(&quot;unchecked&quot;)&#10;        Map&lt;String, Object&gt; arguments = (Map&lt;String, Object&gt;) request.get(&quot;arguments&quot;);&#10;        &#10;        log.info(&quot;MCP tools/call request: tool={}, arguments={}&quot;, toolName, arguments);&#10;        &#10;        McpServerConfiguration.McpToolDefinition tool = toolRegistry.getTool(toolName);&#10;        if (tool == null) {&#10;            return ResponseEntity.badRequest().body(Map.of(&#10;                    &quot;error&quot;, &quot;Tool not found: &quot; + toolName&#10;            ));&#10;        }&#10;        &#10;        try {&#10;            // Convert arguments to the appropriate request type&#10;            Object input = convertArguments(toolName, arguments);&#10;            Object result = tool.function().apply(input);&#10;            &#10;            List&lt;Map&lt;String, Object&gt;&gt; content = new ArrayList&lt;&gt;();&#10;            content.add(Map.of(&#10;                    &quot;type&quot;, &quot;text&quot;,&#10;                    &quot;text&quot;, objectMapper.writeValueAsString(result)&#10;            ));&#10;            &#10;            return ResponseEntity.ok(Map.of(&#10;                    &quot;content&quot;, content,&#10;                    &quot;isError&quot;, false&#10;            ));&#10;        } catch (Exception e) {&#10;            log.error(&quot;Error calling tool {}: {}&quot;, toolName, e.getMessage(), e);&#10;            return ResponseEntity.ok(Map.of(&#10;                    &quot;content&quot;, List.of(Map.of(&#10;                            &quot;type&quot;, &quot;text&quot;,&#10;                            &quot;text&quot;, &quot;Error: &quot; + e.getMessage()&#10;                    )),&#10;                    &quot;isError&quot;, true&#10;            ));&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Ping endpoint for health check&#10;     */&#10;    @GetMapping(value = &quot;/ping&quot;, produces = MediaType.APPLICATION_JSON_VALUE)&#10;    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; ping() {&#10;        return ResponseEntity.ok(Map.of(&#10;                &quot;status&quot;, &quot;ok&quot;,&#10;                &quot;timestamp&quot;, System.currentTimeMillis()&#10;        ));&#10;    }&#10;&#10;    /**&#10;     * Server info endpoint&#10;     */&#10;    @GetMapping(produces = MediaType.APPLICATION_JSON_VALUE)&#10;    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; serverInfo() {&#10;        return ResponseEntity.ok(Map.of(&#10;                &quot;name&quot;, &quot;task-management&quot;,&#10;                &quot;version&quot;, &quot;1.0.0&quot;,&#10;                &quot;protocol&quot;, &quot;mcp&quot;,&#10;                &quot;capabilities&quot;, Map.of(&quot;tools&quot;, true)&#10;        ));&#10;    }&#10;&#10;    /**&#10;     * Generate input schema for a tool&#10;     */&#10;    private Map&lt;String, Object&gt; generateInputSchema(String toolName) {&#10;        Map&lt;String, Object&gt; schema = new HashMap&lt;&gt;();&#10;        schema.put(&quot;type&quot;, &quot;object&quot;);&#10;        &#10;        Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();&#10;        List&lt;String&gt; required = new ArrayList&lt;&gt;();&#10;        &#10;        // Define schemas for each tool&#10;        switch (toolName) {&#10;            case &quot;listProjects&quot;:&#10;                // No parameters needed&#10;                break;&#10;            case &quot;getProject&quot;:&#10;                properties.put(&quot;id&quot;, Map.of(&quot;type&quot;, &quot;number&quot;, &quot;description&quot;, &quot;Project ID&quot;));&#10;                required.add(&quot;id&quot;);&#10;                break;&#10;            case &quot;createProject&quot;:&#10;                properties.put(&quot;name&quot;, Map.of(&quot;type&quot;, &quot;string&quot;, &quot;description&quot;, &quot;Project name&quot;));&#10;                properties.put(&quot;description&quot;, Map.of(&quot;type&quot;, &quot;string&quot;, &quot;description&quot;, &quot;Project description&quot;));&#10;                required.add(&quot;name&quot;);&#10;                break;&#10;            case &quot;updateProject&quot;:&#10;                properties.put(&quot;id&quot;, Map.of(&quot;type&quot;, &quot;number&quot;, &quot;description&quot;, &quot;Project ID&quot;));&#10;                properties.put(&quot;name&quot;, Map.of(&quot;type&quot;, &quot;string&quot;, &quot;description&quot;, &quot;New project name&quot;));&#10;                properties.put(&quot;description&quot;, Map.of(&quot;type&quot;, &quot;string&quot;, &quot;description&quot;, &quot;New project description&quot;));&#10;                required.add(&quot;id&quot;);&#10;                required.add(&quot;name&quot;);&#10;                break;&#10;            case &quot;deleteProject&quot;:&#10;                properties.put(&quot;id&quot;, Map.of(&quot;type&quot;, &quot;number&quot;, &quot;description&quot;, &quot;Project ID to delete&quot;));&#10;                required.add(&quot;id&quot;);&#10;                break;&#10;            case &quot;listTasks&quot;:&#10;                properties.put(&quot;projectId&quot;, Map.of(&quot;type&quot;, &quot;number&quot;, &quot;description&quot;, &quot;Project ID&quot;));&#10;                required.add(&quot;projectId&quot;);&#10;                break;&#10;            case &quot;getTask&quot;:&#10;                properties.put(&quot;id&quot;, Map.of(&quot;type&quot;, &quot;number&quot;, &quot;description&quot;, &quot;Task ID&quot;));&#10;                required.add(&quot;id&quot;);&#10;                break;&#10;            case &quot;createTask&quot;:&#10;                properties.put(&quot;projectId&quot;, Map.of(&quot;type&quot;, &quot;number&quot;, &quot;description&quot;, &quot;Project ID&quot;));&#10;                properties.put(&quot;title&quot;, Map.of(&quot;type&quot;, &quot;string&quot;, &quot;description&quot;, &quot;Task title&quot;));&#10;                properties.put(&quot;description&quot;, Map.of(&quot;type&quot;, &quot;string&quot;, &quot;description&quot;, &quot;Task description&quot;));&#10;                properties.put(&quot;status&quot;, Map.of(&quot;type&quot;, &quot;string&quot;, &quot;description&quot;, &quot;Task status (TODO, IN_PROGRESS, DONE)&quot;));&#10;                required.add(&quot;projectId&quot;);&#10;                required.add(&quot;title&quot;);&#10;                break;&#10;            case &quot;updateTask&quot;:&#10;                properties.put(&quot;id&quot;, Map.of(&quot;type&quot;, &quot;number&quot;, &quot;description&quot;, &quot;Task ID&quot;));&#10;                properties.put(&quot;title&quot;, Map.of(&quot;type&quot;, &quot;string&quot;, &quot;description&quot;, &quot;New task title&quot;));&#10;                properties.put(&quot;description&quot;, Map.of(&quot;type&quot;, &quot;string&quot;, &quot;description&quot;, &quot;New task description&quot;));&#10;                properties.put(&quot;status&quot;, Map.of(&quot;type&quot;, &quot;string&quot;, &quot;description&quot;, &quot;New task status&quot;));&#10;                required.add(&quot;id&quot;);&#10;                required.add(&quot;title&quot;);&#10;                break;&#10;            case &quot;deleteTask&quot;:&#10;                properties.put(&quot;id&quot;, Map.of(&quot;type&quot;, &quot;number&quot;, &quot;description&quot;, &quot;Task ID to delete&quot;));&#10;                required.add(&quot;id&quot;);&#10;                break;&#10;            case &quot;searchTasksByStatus&quot;:&#10;                properties.put(&quot;status&quot;, Map.of(&quot;type&quot;, &quot;string&quot;, &quot;description&quot;, &quot;Status to search for (TODO, IN_PROGRESS, DONE)&quot;));&#10;                required.add(&quot;status&quot;);&#10;                break;&#10;        }&#10;        &#10;        schema.put(&quot;properties&quot;, properties);&#10;        if (!required.isEmpty()) {&#10;            schema.put(&quot;required&quot;, required);&#10;        }&#10;        &#10;        return schema;&#10;    }&#10;&#10;    /**&#10;     * Convert raw arguments map to typed request object&#10;     */&#10;    private Object convertArguments(String toolName, Map&lt;String, Object&gt; arguments) {&#10;        if (arguments == null) {&#10;            arguments = new HashMap&lt;&gt;();&#10;        }&#10;        &#10;        return switch (toolName) {&#10;            case &quot;listProjects&quot; -&gt; new McpToolsConfiguration.ListProjectsRequest();&#10;            case &quot;getProject&quot; -&gt; new McpToolsConfiguration.GetProjectRequest(&#10;                    getLong(arguments, &quot;id&quot;)&#10;            );&#10;            case &quot;createProject&quot; -&gt; new McpToolsConfiguration.CreateProjectRequest(&#10;                    (String) arguments.get(&quot;name&quot;),&#10;                    (String) arguments.get(&quot;description&quot;)&#10;            );&#10;            case &quot;updateProject&quot; -&gt; new McpToolsConfiguration.UpdateProjectRequest(&#10;                    getLong(arguments, &quot;id&quot;),&#10;                    (String) arguments.get(&quot;name&quot;),&#10;                    (String) arguments.get(&quot;description&quot;)&#10;            );&#10;            case &quot;deleteProject&quot; -&gt; new McpToolsConfiguration.DeleteProjectRequest(&#10;                    getLong(arguments, &quot;id&quot;)&#10;            );&#10;            case &quot;listTasks&quot; -&gt; new McpToolsConfiguration.ListTasksRequest(&#10;                    getLong(arguments, &quot;projectId&quot;)&#10;            );&#10;            case &quot;getTask&quot; -&gt; new McpToolsConfiguration.GetTaskRequest(&#10;                    getLong(arguments, &quot;id&quot;)&#10;            );&#10;            case &quot;createTask&quot; -&gt; new McpToolsConfiguration.CreateTaskRequest(&#10;                    getLong(arguments, &quot;projectId&quot;),&#10;                    (String) arguments.get(&quot;title&quot;),&#10;                    (String) arguments.get(&quot;description&quot;),&#10;                    (String) arguments.get(&quot;status&quot;)&#10;            );&#10;            case &quot;updateTask&quot; -&gt; new McpToolsConfiguration.UpdateTaskRequest(&#10;                    getLong(arguments, &quot;id&quot;),&#10;                    (String) arguments.get(&quot;title&quot;),&#10;                    (String) arguments.get(&quot;description&quot;),&#10;                    (String) arguments.get(&quot;status&quot;)&#10;            );&#10;            case &quot;deleteTask&quot; -&gt; new McpToolsConfiguration.DeleteTaskRequest(&#10;                    getLong(arguments, &quot;id&quot;)&#10;            );&#10;            case &quot;searchTasksByStatus&quot; -&gt; new McpToolsConfiguration.SearchTasksByStatusRequest(&#10;                    (String) arguments.get(&quot;status&quot;)&#10;            );&#10;            default -&gt; throw new IllegalArgumentException(&quot;Unknown tool: &quot; + toolName);&#10;        };&#10;    }&#10;&#10;    private Long getLong(Map&lt;String, Object&gt; map, String key) {&#10;        Object value = map.get(key);&#10;        if (value == null) return null;&#10;        if (value instanceof Number) return ((Number) value).longValue();&#10;        return Long.parseLong(value.toString());&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/com/example/taskmanagement/mcp/McpServerConfiguration.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/example/taskmanagement/mcp/McpServerConfiguration.java" />
              <option name="originalContent" value="package com.example.taskmanagement.mcp;&#10;&#10;import org.springframework.ai.model.function.FunctionCallback;&#10;import org.springframework.ai.model.function.FunctionCallbackContext;&#10;import org.springframework.context.ApplicationContext;&#10;import org.springframework.context.annotation.Bean;&#10;import org.springframework.context.annotation.Configuration;&#10;import org.springframework.context.annotation.Description;&#10;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;import java.util.Set;&#10;import java.util.function.Function;&#10;&#10;/**&#10; * MCP Server Configuration using Spring AI Function Calling&#10; * This exposes Spring beans as MCP tools&#10; */&#10;@Configuration&#10;public class McpServerConfiguration {&#10;&#10;    @Bean&#10;    public FunctionCallbackContext functionCallbackContext(ApplicationContext applicationContext) {&#10;        FunctionCallbackContext.Builder builder = FunctionCallbackContext.builder();&#10;&#10;        // Auto-discover all Function beans with @Description annotation&#10;        Map&lt;String, Object&gt; beans = applicationContext.getBeansWithAnnotation(Description.class);&#10;        beans.forEach((beanName, bean) -&gt; {&#10;            if (bean instanceof Function) {&#10;                Description description = applicationContext.findAnnotationOnBean(beanName, Description.class);&#10;                if (description != null) {&#10;                    builder.withFunctionCallback(beanName, description.value(), (Function&lt;?, ?&gt;) bean);&#10;                }&#10;            }&#10;        });&#10;&#10;        return builder.build();&#10;    }&#10;&#10;    @Bean&#10;    public McpToolRegistry mcpToolRegistry(ApplicationContext applicationContext) {&#10;        Map&lt;String, McpToolDefinition&gt; tools = new HashMap&lt;&gt;();&#10;&#10;        Map&lt;String, Object&gt; beans = applicationContext.getBeansWithAnnotation(Description.class);&#10;        beans.forEach((beanName, bean) -&gt; {&#10;            if (bean instanceof Function) {&#10;                Description description = applicationContext.findAnnotationOnBean(beanName, Description.class);&#10;                if (description != null) {&#10;                    tools.put(beanName, new McpToolDefinition(&#10;                            beanName,&#10;                            description.value(),&#10;                            (Function&lt;Object, Object&gt;) bean&#10;                    ));&#10;                }&#10;            }&#10;        });&#10;&#10;        return new McpToolRegistry(tools);&#10;    }&#10;&#10;    public static class McpToolRegistry {&#10;        private final Map&lt;String, McpToolDefinition&gt; tools;&#10;&#10;        public McpToolRegistry(Map&lt;String, McpToolDefinition&gt; tools) {&#10;            this.tools = tools;&#10;        }&#10;&#10;        public Set&lt;String&gt; getToolNames() {&#10;            return tools.keySet();&#10;        }&#10;&#10;        public McpToolDefinition getTool(String name) {&#10;            return tools.get(name);&#10;        }&#10;&#10;        public Map&lt;String, McpToolDefinition&gt; getAllTools() {&#10;            return tools;&#10;        }&#10;    }&#10;&#10;    public record McpToolDefinition(&#10;            String name,&#10;            String description,&#10;            Function&lt;Object, Object&gt; function&#10;    ) {}&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.taskmanagement.mcp;&#10;&#10;import org.springframework.context.ApplicationContext;&#10;import org.springframework.context.annotation.Bean;&#10;import org.springframework.context.annotation.Configuration;&#10;import org.springframework.context.annotation.Description;&#10;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;import java.util.Set;&#10;import java.util.function.Function;&#10;&#10;/**&#10; * MCP Server Configuration using Spring Function Beans&#10; * This exposes Spring beans as MCP tools&#10; */&#10;@Configuration&#10;public class McpServerConfiguration {&#10;&#10;    @Bean&#10;    public McpToolRegistry mcpToolRegistry(ApplicationContext applicationContext) {&#10;        Map&lt;String, McpToolDefinition&gt; tools = new HashMap&lt;&gt;();&#10;        &#10;        Map&lt;String, Object&gt; beans = applicationContext.getBeansWithAnnotation(Description.class);&#10;        beans.forEach((beanName, bean) -&gt; {&#10;            if (bean instanceof Function) {&#10;                Description description = applicationContext.findAnnotationOnBean(beanName, Description.class);&#10;                if (description != null) {&#10;                    @SuppressWarnings(&quot;unchecked&quot;)&#10;                    Function&lt;Object, Object&gt; function = (Function&lt;Object, Object&gt;) bean;&#10;                    tools.put(beanName, new McpToolDefinition(&#10;                            beanName,&#10;                            description.value(),&#10;                            function&#10;                    ));&#10;                }&#10;            }&#10;        });&#10;        &#10;        return new McpToolRegistry(tools);&#10;    }&#10;&#10;    public static class McpToolRegistry {&#10;        private final Map&lt;String, McpToolDefinition&gt; tools;&#10;&#10;        public McpToolRegistry(Map&lt;String, McpToolDefinition&gt; tools) {&#10;            this.tools = tools;&#10;        }&#10;&#10;        public Set&lt;String&gt; getToolNames() {&#10;            return tools.keySet();&#10;        }&#10;&#10;        public McpToolDefinition getTool(String name) {&#10;            return tools.get(name);&#10;        }&#10;&#10;        public Map&lt;String, McpToolDefinition&gt; getAllTools() {&#10;            return tools;&#10;        }&#10;    }&#10;&#10;    public record McpToolDefinition(&#10;            String name,&#10;            String description,&#10;            Function&lt;Object, Object&gt; function&#10;    ) {}&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/start-mcp-server.ps1">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/start-mcp-server.ps1" />
              <option name="updatedContent" value="#!/usr/bin/env pwsh&#10;&#10;# Task Management MCP Server Startup Script&#10;# This script starts the task management application in MCP mode&#10;&#10;$ErrorActionPreference = &quot;Stop&quot;&#10;&#10;Write-Host &quot;Starting Task Management MCP Server...&quot; -ForegroundColor Green&#10;&#10;# Check if JAR exists&#10;$jarPath = &quot;target/taskmanagement-0.0.1-SNAPSHOT.jar&quot;&#10;if (-not (Test-Path $jarPath)) {&#10;    Write-Host &quot;JAR file not found. Building project...&quot; -ForegroundColor Yellow&#10;    mvn clean package -DskipTests&#10;    if ($LASTEXITCODE -ne 0) {&#10;        Write-Host &quot;Build failed!&quot; -ForegroundColor Red&#10;        exit 1&#10;    }&#10;}&#10;&#10;# Start the application&#10;Write-Host &quot;Launching MCP server on http://localhost:8080/mcp&quot; -ForegroundColor Cyan&#10;java -jar $jarPath --server.port=8080&#10;&#10;Write-Host &quot;MCP Server stopped.&quot; -ForegroundColor Yellow&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>